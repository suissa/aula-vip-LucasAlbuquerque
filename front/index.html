<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Front - Ajax</title>
  </head>
  <body>

    <p>
      <button id="nextPage">
        Next
      </button>
    </p>
    <ul id="products">

    </ul>

    <script src="ajax.js"></script>
    <script>
      const page = 0
      const Lib = {};

      const _get = (url = 'http://localhost:3000/products') => {

        return ajax({
          method: 'get',
          url
        })
      }

      Lib.get = _get

      const success = (data) => 
        document.getElementById("products").innerHTML += data.map( el =>
          `<li> 
            <p>
              ${el.name} 
              <br>
              <img width=100 src='${el.logo}'> 
            </p>
            </li>`).join('') && ++page

      
      

      const error = (err) => console.log('error: ', err)

      // console.time('async')
      // console.log(
      
      const getProducts = (page) =>
        Lib.get('http://localhost:3000/products/'+ page)
            .then(success)
            .catch(error)

      getProducts(page)
      // )
      // console.timeEnd('async')
    </script>
  </body>
</html>
